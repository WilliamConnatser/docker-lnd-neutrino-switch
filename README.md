# LND Neutrino Switch Contrainer

![Build on tag](https://github.com/lncm/docker-lnd-neutrino-switch/workflows/Docker%20build%20on%20tag/badge.svg)
![Version](https://img.shields.io/github/v/release/lncm/docker-lnd-neutrino-switch?sort=semver) 
[![Docker Pulls Count](https://img.shields.io/docker/pulls/lncm/neutrino-switcher.svg?style=flat)](https://hub.docker.com/r/lncm/neutrino-switcher)

The purpose of this container is to switch between neutrino and bitcoind as bitcoind takes a long time to sync, and the node is note available. So we will bootstrap a lightning node at lightning speed.

This will only work if pruning is disabled as its not recommended to use lnd with bitcoind with the ```prune=``` setting. It does work but theres some side effects to it.

## Clone directory

```bash
docker pull lncm/neutrino-switcher
```

## If using docker-compose

- Container name of LND needs to match the environment variable defined (if not lnd)

## Files/Folders it needs access to

You may map these anywhere in your filesystem. For best results works best with a similar setup to [this one](https://github.com/lncm/thebox-compose-system)

- /secrets/rpcpass.txt (Bitcoin RPC Password. Not used if RPCPASS variable is explicitly defined)
- /lnd/lnd.conf (LND configuration. For best results write access please)
- /statuses/ (Write access)
- /var/run/docker.sock (is mapped correctly so it can restart the container)

## Environment Variables

Other than that everything should be in the default paths.

- RPCPASS (default: whatever is set in /secrets/rpcpass.txt .) - If we set this, we do not need to link rpcpass.txt (this is generated by configure-box.sh by [the box configure script](https://github.com/lncm/thebox-compose-system/blob/master/configure-box.sh))
- JSONRPCURL (Default: http://10.254.2.2:8332) : Is the JSON-RPC interface for bitcoind
- LND_CONTAINER_NAME (Default: lnd) : is the container name to restart
- SLEEPTIME (Default: 3600) : Configures how often to poll. Ideally we should set this high so we minimize disruptions, but we might want to set it lower for testing.
